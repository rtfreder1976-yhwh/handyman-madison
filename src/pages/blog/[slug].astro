---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
    const blogEntries = await getCollection("blog");
    return blogEntries.map((entry) => ({
        params: { slug: entry.slug },
        props: { entry },
    }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout
    title={`${entry.data.title} | Rittenworx`}
    description={entry.data.description}
>
    <article class="bg-gray-50 min-h-screen py-20 lg:py-32">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Article Header -->
            <header class="mb-12 text-center">
                <div
                    class="flex items-center justify-center gap-2 text-sm text-gray-500 mb-6"
                >
                    <span
                        class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-bold"
                    >
                        {entry.data.tags?.[0] || "Guide"}
                    </span>
                    <time datetime={entry.data.pubDate.toISOString()}>
                        {
                            entry.data.pubDate.toLocaleDateString("en-US", {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                            })
                        }
                    </time>
                </div>
                <h1
                    class="text-4xl md:text-5xl lg:text-6xl font-black text-gray-900 mb-6 leading-tight"
                >
                    {entry.data.title}
                </h1>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                    {entry.data.description}
                </p>

                <div
                    class="flex items-center justify-center gap-4 mt-8 pt-8 border-t border-gray-200 text-left"
                >
                    <div
                        class="w-12 h-12 rounded-full bg-blue-900 flex items-center justify-center text-white font-bold text-lg"
                    >
                        RR
                    </div>
                    <div>
                        <p class="font-bold text-gray-900 text-lg">
                            {entry.data.author}
                        </p>
                        <p class="text-gray-500">
                            Certified Professional & Owner
                        </p>
                    </div>
                </div>
            </header>

            <!-- Article Content -->
            <div
                class="prose prose-lg prose-blue max-w-none mx-auto bg-white p-8 md:p-12 rounded-2xl shadow-sm border border-gray-100"
            >
                <Content />
            </div>

            <!-- Article Footer / CTA -->
            <footer
                class="mt-16 bg-blue-900 rounded-2xl p-8 md:p-12 text-center text-white shadow-xl"
            >
                <h2 class="text-3xl font-black mb-4">
                    Don't Want to Handle It Yourself?
                </h2>
                <p
                    class="text-blue-100 mb-8 max-w-2xl mx-auto text-lg hover:text-white transition-colors"
                >
                    Rittenworx offers premium, guaranteed home maintenance
                    services across Madison, Huntsville, and Athens. Skip the
                    headache and let our certified professionals handle it
                    today.
                </p>
                <div
                    class="flex flex-col sm:flex-row items-center justify-center gap-4"
                >
                    <a
                        href="tel:+12562210373"
                        class="w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white font-bold text-lg py-4 px-8 rounded-xl shadow-md transition-all"
                    >
                        Call (256) 221-0373
                    </a>
                    <a
                        href="/quote"
                        class="w-full sm:w-auto bg-orange-500 hover:bg-orange-600 text-white font-bold text-lg py-4 px-8 rounded-xl shadow-md transition-all"
                    >
                        Get Your Free Quote
                    </a>
                </div>
            </footer>
        </div>
    </article>
</Layout>
